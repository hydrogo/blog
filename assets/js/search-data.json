{
  
    
        "post0": {
            "title": "Скачиваем данные об уровнях воды с ЕСИМО",
            "content": "Что такое ЕСИМО? . ЕСИМО – единая государственная система информации об обстановке в Мировом океане. Несмотря на название, содержит в себе базы данных наблюдений за многими параметрами окружающей среды (посмотреть что есть). . Скачать данные вручную . Представление баз данных в ЕСИМО примерно одинаковое. Здесь и далее в качестве примера будем использовать оперативную базу данных измеренных уровней воды на гидропостах RU_RIHMI-WDC_1325_1. . Веб-интерфейс ЕСИМО для работы с базами данных монструозный, но дело свое делает – можно отсортировать, сделать выборку по дате. . На скриншоте показаны базовые элементы и какую кнопку нажать для скачивания. Я предпочитаю скачивать данные в csv – этот формат является более универсальным и с ним легче потом работать, чем с xls. . . . Даже если вы выберете один день и один пост, все равно скачаются все доступные на данный момент данные Недостатки такого варианта скачивания данных: . Все делается руками, | Так как данные доступны только за последние 7 дней, то заходить за оперативной информацией нужно регулярно. | . Код на python для автоматической загрузки данных . Чтобы не травмировать себя ежедневным общением с ЕСИМО нужно написать немного кода. Будем использовать стандартную библиотеку python, а также библиотеки request (для отправки запросов на сервер) и pandas (для обработки полученных данных). . # Импортируем необходимые библиотеки import io import datetime import requests import pandas as pd # Корневой адрес к которому мы будем делать запрос base_url = &#39;http://esimo.ru/dataview/getresourceexport&#39; # Идентификатор нашей базы данных db_id = &#39;RU_RIHMI-WDC_1325_1&#39; # Определяем даты # Будем скачивать данные за последнюю неделю # Сегодняшняя дата today = datetime.date.today() # Запрос устроен таким образом, что отсчет начинается с завтрашнего дня tomorrow = (today + datetime.timedelta(days=1)).strftime(&quot;%Y-%m-%d&quot;) week_back = (today - datetime.timedelta(days=6)).strftime(&quot;%Y-%m-%d&quot;) # Задаем параметры запроса params = {&#39;format&#39;: &#39;csv&#39;, &#39;resourceid&#39;: db_id, &#39;filter&#39;: f&quot;(((m4400 between &#39;{week_back}&#39; and &#39;{tomorrow}&#39;) or (CAST(m4400 as text) like &#39;%2099-12-31% &#39;)))&quot; } # Отправляем POST запрос на сервер response = requests.post(url=base_url, data=params) # Считываем пришедшие данные raw_data = response.content # Получаем данные в сыром виде, поэтому требуется # дополнительная обработка с помощью pandas data = pd.read_table(io.StringIO(raw_data.decode(&#39;utf-8&#39;)), header=0, sep=&#39;&quot;,&quot;&#39;, usecols=[0, 1, 2, 3, 4, 5, 7], names=[&quot;id&quot;, &quot;hydropost_name&quot;, &quot;latitude&quot;, &quot;longitude&quot;, &quot;timestamp&quot;, &quot;Level&quot;, &quot;Level_mean&quot;], engine=&#39;python&#39;) data[&quot;id&quot;] = data[&quot;id&quot;].apply(lambda x: str(x[1:])) data = data.drop_duplicates() # Сохраняем данные data.to_csv(f&quot;~/Downloads/esimo_{today.strftime(&#39;%Y%m%d&#39;)}.csv&quot;) . Попробовать в Google Colab. . Посмотрим данные с гидропоста в Новокузнецке: . data[data[&quot;id&quot;]==&quot;10240&quot;] . . Теперь у нас в руках универсальный инструмент получения оперативных данных об измеренных уровнях воды. . Представленный фрагмент кода я использовал для создания системы краткосрочного прогнозирования уровня воды OpenLevels. Надеюсь, что и вам он пригодится. . Заключение . Несомненно, Росгидромету есть куда стремиться в улучшении доступа к результатам мониторинговых наблюдений на сети метеорологических станций и гидрологических постов. ЕСИМО в зубы не смотрят, но хотя бы посмотрите как обстоят дела в США: . Гидрологические данные: https://waterservices.usgs.gov/, | Метеорологические данные: https://www.weather.gov/ | . Отдельно отмечу оторванность нашей мониторинговой сети от глобальной сети обмена гидрологической информации WHOS, созданной в рамках Всемирной метеорологической организации. . Такая оторванность имеет тяжелые последствия. Например, в нашей недавней работе мы показали, что имея доступ к национальному архиву наблюдений за речным стоком, можно существенно улучшить качество регионального гидрологического реанализа. К сожалению, отсутствие этих данных в открытом доступе ограничивает эффективность моделей, на основе которых мы можем оценивать располагаемые водные ресурсы, а также возможную динамику их изменения в будущем. . Но эта уже совсем другая история. .",
            "url": "https://hydrogo.github.io/blog/tips&tricks/2020/06/26/get-esimo-data.html",
            "relUrl": "/tips&tricks/2020/06/26/get-esimo-data.html",
            "date": " • Jun 26, 2020"
        }
        
    
  

  
  

  
      ,"page1": {
          "title": "About Me",
          "content": "I am Georgy Ayzel . And this is how I work, think and live (actually not). . You are welcome to enjoy my posts about life and using open-source tools in hydrology. . Operational services . OpenForecast | OpenLevels | . Research interests . Hydrologic modelling | Calculations for ungauged basins | Short-term runoff forecasting | Machine and deep learning for hydrology | Land surface – Atmosphere interactions | Climate change assessment | Water resources under changing conditions | Quantitative precipitation nowcasting | . Current Research . Precipitation nowcasting using modern advances in image processing techniques and deep learning | Rainfall-runoff hydrological modelling using conceptual lumped models and state-of-art machine and deep learning techniques | . Publications . WoS-indexed publications can be viewed in my Orcid page | My profile on Google Scholar Google Scholar | . Education . Ph.D., 2014: Institute of Water Problems, Moscow, Russia | M.S., 2011: Department of Hydrology, Geographical Faculty, Lomonosov Moscow State University, Russia | . Motivation . Open Science: open data, free software, reproducible research | Memento Mori | .",
          "url": "https://hydrogo.github.io/blog/about/",
          "relUrl": "/about/",
          "date": ""
      }
      
  

  

  
  

  

  
  

  

  
  

  
  

}